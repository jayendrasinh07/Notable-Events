<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notable Events</title>
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script>
        window.OneSignalDeferred = window.OneSignalDeferred || [];
        OneSignalDeferred.push(async function(OneSignal) {
            await OneSignal.init({
                appId: "25245e3f-d2a0-439d-b12b-7ded8a71433b",
            });
        });
    </script>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@700&family=Pacifico&family=Roboto+Slab:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
    <style>
        .dynamic-section {
            padding: 2rem;
            max-width: 800px;
            margin: 1rem auto;
        }

        .dynamic-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 1.7rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .dynamic-card p {
            color: #333;
            transition: color 0.3s ease;
        }

        /* Dark Mode */
        [data-theme="dark"] .dynamic-card {
            background: #2d2d2d;
            color: #ffffff;
        }

        .date-display {
            font-size: 1rem;
            color: #3498db;
            margin-bottom: 1rem;
            font-weight: 600;
            border-bottom: 2px solid #3498db;
            padding-bottom: 0.5rem;
        }

        .dynamic-text {
            font-size: 1.1em;
            line-height: 1.7;
            color: #333;
            transition: color 0.3s ease;
        }

        [data-theme="dark"] .dynamic-text {
            color: #f0f0f0;
        }
        .dark-mode .dynamic-card {
            background: #213451a4;
            color: #ffffff;
        }
        .dark-mode .dynamic-card p {
            color: #f0f0f0;
        }
        .dark-mode .dynamic-text {
            color: #f0f0f0;
        }
        .dark-mode header,
        .dark-mode nav ul li a,
        .dark-mode section,
        .dark-mode footer,
        .dark-mode form input,
        .dark-mode form textarea,
        .dark-mode form button,
        .dark-mode button,
        .dark-mode #subscribe-form input[type="email"],
        .dark-mode #subscribe-form button {
            background-color: #21345138;
            color: #ffffff;
        }
    </style>
</head>
<body>
    <header>
        <h1>Notable Events</h1>
        <h2 class="time-snapshot-title">TIME SNAPSHOT</h2> <!-- Ensure the title is displayed -->
        <span id="menubar-icon">&#9776;</span> <!-- Add menubar icon -->
        <div id="menubar-popup">
            <span class="back-button">&larr;</span> <!-- Replace "Back" with arrow -->
            <ul>
                <li><a href="index.html">Home</a></li> <!-- Add Home -->
                <li><a href="#" id="calendar-link">Calendar</a></li> <!-- Add Calendar -->
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="help.html">Help</a></li> <!-- Add Help -->
            </ul>
            <!-- Updated HTML with animation elements -->
<button id="dark-mode-toggle" class="dark-mode-toggle">
    <div class="toggle-container">
        <i class="fas fa-moon"></i>
    
    </div>
</button> <!-- Move dark mode toggle here -->
            <!-- HTML -->
<button id="language-toggle" class="lang-switch">
    <span class="lang-icon">üåê</span>
    <span class="lang-text">English</span>
  </button> <!-- Add language switch button -->
        </div>
        <nav>
            <ul>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="help.html">Help</a></li> <!-- Update Help link -->
            </ul>
        </nav>
    </header>

    
        <div class="dynamic-card">
            <div class="dynamic-text">
                <p>"Welcome to TIME SNAPSHOT. Here, you will find historical events that happened on this day."</p>
            </div>
            <div class="date-display" id="current-date-section">
                Today's Date: <span id="current-date"></span>
                <p id="current-date-paragraph">Click here to see today's events</p>
            </div>
        </div>
    
    <section id="YOU KNOW">
        <h2>EVENTS</h2>
        <div style="margin-top: -25px; width: 100%; display: flex; justify-content: flex-start; align-items: center;">
            <input type="text" id="search-input" placeholder="Search events..." style="padding: 0.5rem; width: 40%; height: 0.4rem; max-width: 300px;">
        </div> 
        <div id="events">
            <div class="dynamic-card" id="1-1">
            <p class="en"><b>Historical Events on January 1</b></p>
            <p class="hi" style="display: none;">1 ‡§ú‡§®‡§µ‡§∞‡•Ä ‡§ï‡•á ‡§ê‡§§‡§ø‡§π‡§æ‡§∏‡§ø‡§ï ‡§ò‡§ü‡§®‡§æ‡§ï‡•ç‡§∞‡§Æ</p>
            <p class="en">‚óè1880: ‚ÄòMoney order‚Äô system started in the country.</p>
            <p class="hi" style="display: none;">‚óè1880: ‡§¶‡•á‡§∂ ‡§Æ‡•á‡§Ç '‡§Æ‡§®‡•Ä ‡§ë‡§∞‡•ç‡§°‡§∞' ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•Å‡§à‡•§</p>
            <p class="en">‚óè1808: Slave imports were banned in the United States.</p>
            <p class="hi" style="display: none;">‚óè1808: ‡§∏‡§Ç‡§Ø‡•Å‡§ï‡•ç‡§§ ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§Ö‡§Æ‡•á‡§∞‡§ø‡§ï‡§æ ‡§Æ‡•á‡§Ç ‡§¶‡§æ‡§∏ ‡§Ü‡§Ø‡§æ‡§§ ‡§™‡§∞ ‡§™‡•ç‡§∞‡§§‡§ø‡§¨‡§Ç‡§ß ‡§≤‡§ó‡§æ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§</p>
            <p class="en">‚óè1818: The battle of Bhima Koregaon ‚Äì 2nd Bombay Native Infantry Battalion, led by F. F. Stanton, defeated 28,000 Peshwa troops at Bhima Koregaon, with only 834 soldiers.</p>
            <p class="hi" style="display: none;">‚óè1818: ‡§≠‡•Ä‡§Æ‡§æ ‡§ï‡•ã‡§∞‡•á‡§ó‡§æ‡§Ç‡§µ ‡§ï‡•Ä ‡§≤‡§°‡§º‡§æ‡§à - ‡§è‡§´. ‡§è‡§´. ‡§∏‡•ç‡§ü‡•à‡§Ç‡§ü‡§® ‡§ï‡•á ‡§®‡•á‡§§‡•É‡§§‡•ç‡§µ ‡§Æ‡•á‡§Ç 2nd ‡§¨‡•â‡§Æ‡•ç‡§¨‡•á ‡§®‡•á‡§ü‡§ø‡§µ ‡§á‡§®‡•ç‡§´‡•à‡§Ç‡§ü‡•ç‡§∞‡•Ä ‡§¨‡§ü‡§æ‡§≤‡§ø‡§Ø‡§® ‡§®‡•á ‡§ï‡•á‡§µ‡§≤ 834 ‡§∏‡•à‡§®‡§ø‡§ï‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§≠‡•Ä‡§Æ‡§æ ‡§ï‡•ã‡§∞‡•á‡§ó‡§æ‡§Ç‡§µ ‡§Æ‡•á‡§Ç 28,000 ‡§™‡•á‡§∂‡§µ‡§æ ‡§∏‡•à‡§®‡§ø‡§ï‡•ã‡§Ç ‡§ï‡•ã ‡§π‡§∞‡§æ‡§Ø‡§æ‡•§</p>
            <p class="en">‚óè1848: Mahatma Jyotirao Phule and Savitribai Phule started the first girls‚Äô school at Bhide Wada, Pune.</p>
            <p class="hi" style="display: none;">‚óè1848: ‡§Æ‡§π‡§æ‡§§‡•ç‡§Æ‡§æ ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∞‡§æ‡§µ ‡§´‡•Å‡§≤‡•á ‡§î‡§∞ ‡§∏‡§æ‡§µ‡§ø‡§§‡•ç‡§∞‡•Ä‡§¨‡§æ‡§à ‡§´‡•Å‡§≤‡•á ‡§®‡•á ‡§™‡•Å‡§£‡•á ‡§ï‡•á ‡§≠‡§ø‡§°‡•á ‡§µ‡§æ‡§°‡§æ ‡§Æ‡•á‡§Ç ‡§™‡§π‡§≤‡§æ ‡§≤‡§°‡§º‡§ï‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡•ç‡§ï‡•Ç‡§≤ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§ø‡§Ø‡§æ‡•§</p>
            <p class="en">‚óè1862: The Indian Penal Code came into existence.</p>
            <p class="hi" style="display: none;">‚óè1862: ‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§¶‡§Ç‡§° ‡§∏‡§Ç‡§π‡§ø‡§§‡§æ ‡§Ö‡§∏‡•ç‡§§‡§ø‡§§‡•ç‡§µ ‡§Æ‡•á‡§Ç ‡§Ü‡§à‡•§</p>
            <p class="en">‚óè1877: Queen Victoria of England became the Empress of India.</p>
            <p class="hi" style="display: none;">‚óè1877: ‡§á‡§Ç‡§ó‡•ç‡§≤‡•à‡§Ç‡§° ‡§ï‡•Ä ‡§∞‡§æ‡§®‡•Ä ‡§µ‡§ø‡§ï‡•ç‡§ü‡•ã‡§∞‡§ø‡§Ø‡§æ ‡§≠‡§æ‡§∞‡§§ ‡§ï‡•Ä ‡§Æ‡§π‡§æ‡§∞‡§æ‡§®‡•Ä ‡§¨‡§®‡•Ä‡§Ç‡•§</p>
            <p class="en">‚óè1903: In Great Delhi Darbar, marked the coronation of King Edward VII as Emperor of India.</p>
            <p class="hi" style="display: none;">‚óè1903: ‡§ó‡•ç‡§∞‡•á‡§ü ‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä ‡§¶‡§∞‡§¨‡§æ‡§∞ ‡§Æ‡•á‡§Ç, ‡§ï‡§ø‡§Ç‡§ó ‡§è‡§°‡§µ‡§∞‡•ç‡§° VII ‡§ï‡§æ ‡§≠‡§æ‡§∞‡§§ ‡§ï‡•á ‡§∏‡§Æ‡•ç‡§∞‡§æ‡§ü ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§∞‡§æ‡§ú‡•ç‡§Ø‡§æ‡§≠‡§ø‡§∑‡•á‡§ï ‡§π‡•Å‡§Ü‡•§</p>
            <!-- Add more historical events as needed -->
            
            
        </div>

        <a href="more-events.html" id="load-more" style="background-color: #315665; color: white; padding: 0.5rem 1rem; border-radius: 5px; text-decoration: none; display: inline-block; margin-top: 1rem;">Load more...</a>
        <div class="share-buttons">
            <a href="sms:?&body=Check%20out%20this%20event!%20https://example.com" class="sms">
                <i class="fas fa-sms"></i> Share via Text Message
            </a>
            <a href="https://api.whatsapp.com/send?text=Check%20out%20this%20event!%20https://example.com" target="_blank" class="whatsapp">
                <i class="fab fa-whatsapp"></i> Share on WhatsApp
            </a>
        </div>
    </section>
    <!-- Add a container for search results popup -->
    <div id="search-popup" class="search-popup">
        <span class="close-btn" onclick="document.getElementById('search-popup').style.display='none'">CLOSE</span>
    </div>
    <div id="calendar-popup" class="calendar-popup">
        <div class="calendar">
            <div class="calendar-header">
                <button id="prev-month">&lt;</button>
                <div id="current-month">January 2023</div>
                <button id="next-month">&gt;</button>
                <span class="close-btn" onclick="document.getElementById('calendar-popup').classList.remove('show'); document.getElementById('calendar-popup').classList.add('hide'); setTimeout(() => document.getElementById('calendar-popup').style.display = 'none', 300);">√ó</span>
            </div>
            <div class="calendar-weekdays">
                <div class="calendar-weekday">Sun</div>
                <div class="calendar-weekday">Mon</div>
                <div class="calendar-weekday">Tue</div>
                <div class="calendar-weekday">Wed</div>
                <div class="calendar-weekday">Thu</div>
                <div class="calendar-weekday">Fri</div>
                <div class="calendar-weekday">Sat</div>
            </div>
            <div class="calendar-days">
                <!-- Calendar days will be dynamically generated -->
            </div>
        </div>
    </div>
    <footer>
        <p>¬© 2025 Time Snapshot. All rights reserved.</p>
    </footer>
    <script src="script.js"></script>
    <script>
        // Prevent page reload when navigating between pages
        document.querySelectorAll('nav ul li a').forEach(function(link) {
            link.addEventListener('click', function(event) {
                event.preventDefault();
                const targetId = this.getAttribute('href').replace('.html', '');
                if (targetId === 'about' || targetId === 'contact' || targetId === 'help') {
                    window.location.href = this.getAttribute('href'); // Navigate to the page
                } else {
                    document.querySelectorAll('section').forEach(function(section) {
                        section.style.display = 'none';
                    });
                    document.getElementById(targetId).style.display = 'block';
                }
            });
        });

        // Show the default section
        document.getElementById('YOU KNOW').style.display = 'block';

        let darkModePopupShown = false;

        document.getElementById('load-more').addEventListener('click', function() {
            window.location.href = 'more-events.html';
        });

        document.getElementById('search-input').addEventListener('input', async function() {
            var filter = this.value.toLowerCase();
            var searchPopup = document.getElementById('search-popup');
            searchPopup.innerHTML = '<span class="close-btn" onclick="document.getElementById(\'search-popup\').style.display=\'none\'">CLOSE</span>'; // Clear previous search results and add close button
            searchPopup.style.display = filter ? 'block' : 'none'; // Show or hide the popup

            var events = document.querySelectorAll('#events p.en, #events p.hi');
            var hasResults = false;
            events.forEach(function(event) {
                var text = event.textContent.toLowerCase();
                if (text.includes(filter)) {
                    var regex = new RegExp(`(${filter})`, 'gi');
                    var highlightedText = event.textContent.replace(regex, '<span class="highlight">$1</span>');
                    var clonedEvent = event.cloneNode(true);
                    clonedEvent.innerHTML = highlightedText;
                    searchPopup.appendChild(clonedEvent);
                    hasResults = true;
                }
            });

            // Fetch and display events from more-events.html
            if (filter) {
                const response = await fetch('more-events.html');
                const text = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, 'text/html');
                const moreEvents = doc.querySelectorAll('#more-events p.en, #more-events p.hi');
                moreEvents.forEach(function(event) {
                    var text = event.textContent.toLowerCase();
                    if (text.includes(filter)) {
                        var regex = new RegExp(`(${filter})`, 'gi');
                        var highlightedText = event.textContent.replace(regex, '<span class="highlight">$1</span>');
                        var clonedEvent = event.cloneNode(true);
                        clonedEvent.innerHTML = highlightedText;
                        searchPopup.appendChild(clonedEvent);
                        hasResults = true;
                    }
                });
            }

            if (!hasResults) {
                var noItemsMessage = document.createElement('p');
                noItemsMessage.textContent = 'The search results were not found';
                searchPopup.appendChild(noItemsMessage);
            }
        });

        // Hide search popup when clicking outside of it
        document.addEventListener('click', function(event) {
            var searchPopup = document.getElementById('search-popup');
            var searchInput = document.getElementById('search-input');
            if (!searchPopup.contains(event.target) && !searchInput.contains(event.target)) {
                searchPopup.style.display = 'none';
            }
        });

        document.getElementById('dark-mode-toggle').addEventListener('click', function() {
            document.body.classList.toggle('dark-mode');
            // Save dark mode state to localStorage
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('darkMode', 'enabled');
            } else {
                localStorage.setItem('darkMode', 'disabled');
            }
        });

        // Load dark mode state from localStorage
        window.addEventListener('load', function() {
            if (localStorage.getItem('darkMode') === 'enabled') {
                document.body.classList.add('dark-mode');
            }
        });

        
        document.querySelectorAll('.share-buttons a').forEach(function(button) {
            button.addEventListener('click', function(event) {
                event.preventDefault();
                const url = window.location.href;
                const text = "Check out this event!";
                if (this.classList.contains('sms')) {
                    window.location.href = `sms:?&body=${encodeURIComponent(text + ' ' + url)}`;
                } else if (this.classList.contains('whatsapp')) {
                    window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(text + ' ' + url)}`, '_blank');
                }
            });
        });

        document.addEventListener('DOMContentLoaded', function() {
            const calendarDays = document.querySelector('.calendar-days');
            const currentMonth = document.getElementById('current-month');
            const prevMonthBtn = document.getElementById('prev-month');
            const nextMonthBtn = document.getElementById('next-month');

            const today = new Date();
            let date = new Date();
            let year = date.getFullYear();
            let month = date.getMonth();

            function renderCalendar() {
                calendarDays.innerHTML = '';
                const firstDayOfMonth = new Date(year, month, 1).getDay();
                const lastDateOfMonth = new Date(year, month + 1, 0).getDate();
                const lastDayOfLastMonth = new Date(year, month, 0).getDate();

                currentMonth.textContent = date.toLocaleDateString('default', { month: 'long', year: 'numeric' });

                for (let i = firstDayOfMonth; i > 0; i--) {
                    const day = document.createElement('div');
                    day.classList.add('calendar-day');
                    day.textContent = lastDayOfLastMonth - i + 1;
                    day.style.opacity = '0.5';
                    calendarDays.appendChild(day);
                }

                for (let i = 1; i <= lastDateOfMonth; i++) {
                    const day = document.createElement('div');
                    day.classList.add('calendar-day');
                    day.textContent = i;
                    if (i === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                        day.classList.add('current');
                    }
                    day.addEventListener('click', async function() {
                        const targetId = `${month + 1}-${i}`;
                        let targetElement = document.getElementById(targetId);
                        if (targetElement) {
                            targetElement.scrollIntoView({ behavior: 'smooth' });
                        } else {
                            const pages = ['more-events.html', 'second.html'];
                            for (const page of pages) {
                                const response = await fetch(page);
                                const text = await response.text();
                                const parser = new DOMParser();
                                const doc = parser.parseFromString(text, 'text/html');
                                targetElement = doc.getElementById(targetId);
                                if (targetElement) {
                                    window.location.href = `${page}#${targetId}`;
                                    return;
                                }
                            }
                            alert('No events found for this date.');
                        }
                    });
                    calendarDays.appendChild(day);
                }
            }

            prevMonthBtn.addEventListener('click', () => {
                month--;
                if (month < 0) {
                    month = 11;
                    year--;
                }
                date = new Date(year, month);
                renderCalendar();
            });

            nextMonthBtn.addEventListener('click', () => {
                month++;
                if (month > 11) {
                    month = 0;
                    year++;
                }
                date = new Date(year, month);
                renderCalendar();
            });

            renderCalendar();
        });

        document.getElementById('menubar-icon').addEventListener('click', function() {
            const popup = document.getElementById('menubar-popup');
            if (popup.classList.contains('show')) {
                document.getElementById('calendar-popup').classList.remove('show');
                document.getElementById('calendar-popup').classList.add('hide');
                setTimeout(() => {
                    document.getElementById('calendar-popup').style.display = 'none';
                    popup.classList.remove('show');
                    popup.classList.add('hide');
                    setTimeout(() => popup.style.display = 'none', 300); // Hide after animation
                }, 300); // Close calendar before hiding menubar
            } else {
                popup.classList.remove('hide');
                popup.classList.add('show');
                popup.style.display = 'block'; // Show immediately
            }
        });

        document.addEventListener('click', function(event) {
            const menubarIcon = document.getElementById('menubar-icon');
            const menubarPopup = document.getElementById('menubar-popup');
            const calendarPopup = document.getElementById('calendar-popup');
            if (!menubarIcon.contains(event.target) && !menubarPopup.contains(event.target) && !calendarPopup.contains(event.target)) {
                document.getElementById('calendar-popup').classList.remove('show');
                document.getElementById('calendar-popup').classList.add('hide');
                setTimeout(() => {
                    calendarPopup.style.display = 'none';
                    menubarPopup.classList.remove('show');
                    menubarPopup.classList.add('hide');
                    setTimeout(() => menubarPopup.style.display = 'none', 300);
                }, 300); // Close calendar before hiding menubar
            }
        });

        // Add event listener for the "Back" button
        document.querySelector('#menubar-popup .back-button').addEventListener('click', function() {
            const popup = document.getElementById('menubar-popup');
            document.getElementById('calendar-popup').classList.remove('show');
            document.getElementById('calendar-popup').classList.add('hide');
            setTimeout(() => {
                document.getElementById('calendar-popup').style.display = 'none';
                popup.classList.remove('show');
                popup.classList.add('hide');
                setTimeout(() => popup.style.display = 'none', 300);
            }, 300); // Close calendar before hiding menubar
        });

        document.getElementById('calendar-link').addEventListener('click', function(event) {
            event.preventDefault();
            const calendarPopup = document.getElementById('calendar-popup');
            calendarPopup.classList.remove('hide');
            calendarPopup.classList.add('show');
            calendarPopup.style.display = 'block';
        });

       
      
        async function scrollToCurrentDateEvent() {
            const currentDate = new Date();
            const day = currentDate.getDate();
            const month = currentDate.toLocaleString('default', { month: 'long' });
            const targetId = `${currentDate.getMonth() + 1}-${day}`;

            // Check in the current page
            let targetParagraph = document.getElementById(targetId);
            if (targetParagraph) {
                targetParagraph.scrollIntoView({ behavior: 'smooth' });
                return;
            }

            // Check in more-events.html
            const responseMoreEvents = await fetch('more-events.html');
            const textMoreEvents = await responseMoreEvents.text();
            const parserMoreEvents = new DOMParser();
            const docMoreEvents = parser.parseFromString(textMoreEvents, 'text/html');
            targetParagraph = docMoreEvents.getElementById(targetId);
            if (targetParagraph) {
                window.location.href = `more-events.html#${targetParagraph.id}`;
                return;
            }

            // Check in second.html
            const responseSecond = await fetch('second.html');
            const textSecond = await responseSecond.text();
            const parserSecond = new DOMParser();
            const docSecond = parserSecond.parseFromString(textSecond, 'text/html');
            targetParagraph = docSecond.getElementById(targetId);
            if (targetParagraph) {
                window.location.href = `second.html#${targetParagraph.id}`;
                return;
            }

            alert('No events found for today\'s date.');
        }

        // Scroll to the paragraph with the corresponding date when the current date section or paragraph is clicked
        document.getElementById('current-date-section').addEventListener('click', scrollToCurrentDateEvent);
        document.getElementById('current-date-paragraph').addEventListener('click', scrollToCurrentDateEvent);
    </script>
 
<script>
    // Modified language management system
    let currentLanguage = localStorage.getItem('language') || 'en';

    // Consolidated language apply function
    function applyLanguageSettings() {
        document.querySelectorAll('.en, .hi').forEach(el => {
            el.style.display = el.classList.contains(currentLanguage) ? 'block' : 'none';
        });
        document.querySelector('#language-toggle .lang-text').textContent = 
            currentLanguage === 'hi' ? 'English' : 'Hindi';
    }

    // Updated toggle function
    function toggleLanguage() {
        currentLanguage = currentLanguage === 'en' ? 'hi' : 'en';
        localStorage.setItem('language', currentLanguage);
        applyLanguageSettings();
    }

    // Enhanced content loader
    async function checkOtherPages(dateId, defaultParagraph) {
        const pages = ['more-events.html', 'second.html'];
        
        for(const page of pages) {
            try {
                const response = await fetch(page);
                const html = await response.text();
                const doc = new DOMParser().parseFromString(html, 'text/html');
                const content = doc.getElementById(dateId);

                if(content) {
                    defaultParagraph.style.display = 'none';
                    const dynamicCard = document.querySelector('.dynamic-card');
                    const clonedContent = content.cloneNode(true);

                    // Apply language filtering before insertion
                    Array.from(clonedContent.children).forEach(child => {
                        if(child.classList.contains('en') || child.classList.contains('hi')) {
                            child.style.display = child.classList.contains(currentLanguage) ? 'block' : 'none';
                        }
                    });
                    
                    dynamicCard.appendChild(clonedContent);
                    break;
                }
            } catch(error) {
                console.error(`Error loading ${page}:`, error);
            }
        }
    }

    // Modified initialization sequence
    window.addEventListener('load', function() {
        // Apply language first
        applyLanguageSettings();
        
        // Then load dynamic content
        updateCurrentDate();
        
        // Set up other event listeners
        document.getElementById('language-toggle').addEventListener('click', toggleLanguage);
        document.getElementById('current-date-section').addEventListener('click', scrollToCurrentDateEvent);
        document.getElementById('current-date-paragraph').addEventListener('click', scrollToCurrentDateEvent);
    });

    // Function to update current date and show dynamic content
    function updateCurrentDate() {
        const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        const today = new Date();
        const currentDate = `${today.getDate()} ${months[today.getMonth()]}, ${today.getFullYear()}`;
        document.getElementById('current-date').textContent = currentDate;

        // Format ID as month-day (e.g., February 7 = 2-7)
        const dateId = `${today.getMonth() + 1}-${today.getDate()}`;
        
        // Hide default paragraph when content is found
        const defaultParagraph = document.getElementById('current-date-paragraph');
        
        // Check if element exists in current page
        const targetElement = document.getElementById(dateId);
        
        if(targetElement) {
            defaultParagraph.style.display = 'none';
            targetElement.style.display = 'block';
        } else {
            // Check other pages using fetch API
            checkOtherPages(dateId, defaultParagraph);
        }
    }

    async function scrollToCurrentDateEvent() {
        const currentDate = new Date();
        const day = currentDate.getDate();
        const month = currentDate.toLocaleString('default', { month: 'long' });
        const targetId = `${currentDate.getMonth() + 1}-${day}`;

        // Check in the current page
        let targetParagraph = document.getElementById(targetId);
        if (targetParagraph) {
            targetParagraph.scrollIntoView({ behavior: 'smooth' });
            return;
        }

        // Check in more-events.html
        const responseMoreEvents = await fetch('more-events.html');
        const textMoreEvents = await responseMoreEvents.text();
        const parserMoreEvents = new DOMParser();
        const docMoreEvents = parser.parseFromString(textMoreEvents, 'text/html');
        targetParagraph = docMoreEvents.getElementById(targetId);
        if (targetParagraph) {
            window.location.href = `more-events.html#${targetParagraph.id}`;
            return;
        }

        // Check in second.html
        const responseSecond = await fetch('second.html');
        const textSecond = await responseSecond.text();
        const parserSecond = new DOMParser();
        const docSecond = parserSecond.parseFromString(textSecond, 'text/html');
        targetParagraph = docSecond.getElementById(targetId);
        if (targetParagraph) {
            window.location.href = `second.html#${targetParagraph.id}`;
            return;
        }

        alert('No events found for today\'s date.');
    }

    // Scroll to the paragraph with the corresponding date when the current date section or paragraph is clicked
    document.getElementById('current-date-section').addEventListener('click', scrollToCurrentDateEvent);
    document.getElementById('current-date-paragraph').addEventListener('click', scrollToCurrentDateEvent);
</script>
</body>
</html>
